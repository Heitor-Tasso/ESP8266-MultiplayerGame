#: import Joystick uix.joystick.Joystick
#: import FloatButtonIcon uix.icons.FloatButtonIcon
#: import ToggleButtonIcon uix.icons.ToggleButtonIcon
#: import AnchorIcon uix.icons.AnchorIcon

#: import image utils.image

<GamePad>:
	BoxLayout:
		orientation: 'vertical'
		size_hint:None, None
		size: root.size
		canvas.before:
			Color:
				rgba: [0, 0.3, 0.5, 1]
			Rectangle:
				size:self.size
				pos:self.pos

		BoxLayout:
			size_hint_y: None
			height:'70dp'
			Widget:
			AnchorIcon:
				ToggleButtonIcon:
					icon_source:image('correct')
					on_state: root.move_layout = True if self.state == 'down' else False

		FloatLayout:
			id:content_pad
			Label:
				id: fps_lbl
				size_hint: None, None
				size: '100dp', '50dp'
				x: content_pad.x+(content_pad.width*0.5)-(self.width*0.5)
				y:content_pad.y+(content_pad.height*0.5)-(self.height*0.5)
				color: [1, 1, 1, 1]

			FloatButtonIcon:
				id:pad_left
				icon_source:image('pad_left')
				size: '100dp', '70dp'

			FloatButtonIcon:
				id:options
				icon_source:image('options')
				size: '50dp', '50dp'

			FloatButtonIcon:
				id:pad_right
				icon_source:image('pad_right')
				size: '100dp', '70dp'

			Joystick:
				id: joystick
				size_hint: None, None
				size: '100dp', '100dp'
				sticky: False
				outer_size: 1
				inner_size: 0.75
				pad_size: 0.5
				outer_line_width: 0.01
				inner_line_width: 0.01
				pad_line_width: 0.01
				outer_background_color: (0.75, 0.75, 0.75, 0.3)
				outer_line_color: (1, 1, 1, 0.6)
				inner_background_color: (0.75, 0.75, 0.75, 0.1)
				inner_line_color: (0.7,  0.7,  0.7,  0.4)
				pad_background_color: (0.4,  0.4,  0.4,  1)
				pad_line_color: (1, 1, 1, 0.3)

			FloatButtonIcon:
				id: control_left
				state_sources:[image('attack'), image('attack-ab')]
				on_press: root.do_ataque()
				radius_effect: [self.width]
